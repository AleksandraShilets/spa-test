(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{4319:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(7876),a=r(4232),o=r(5508),c=r(8230),l=r.n(c);let i=()=>{let{addProduct:e}=(0,o.A)(),[t,r]=(0,a.useState)(""),[c,i]=(0,a.useState)(""),[d,n]=(0,a.useState)(""),[u,p]=(0,a.useState)("");return(0,s.jsxs)("form",{onSubmit:s=>{s.preventDefault(),e({id:Date.now(),title:t,description:c,price:Number(d),image:u}),r(""),i(""),n(""),p("")},children:[(0,s.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Name",required:!0}),(0,s.jsx)("textarea",{value:c,onChange:e=>i(e.target.value),placeholder:"Description",required:!0,className:"w-96 h-32 resize-none border rounded-md p-2"}),(0,s.jsx)("input",{type:"number",value:d,onChange:e=>n(e.target.value),placeholder:"Price",required:!0}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"URL image",required:!0}),(0,s.jsx)("button",{type:"submit",children:"Add product"}),(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsx)(l(),{href:"/products",className:"mt-auto py-4 text-right link-reset",children:"Back products"})})]})}},5508:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(4232);let a=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,o={setState:s,getState:a,getInitialState:()=>c,subscribe:e=>(r.add(e),()=>r.delete(e))},c=t=e(s,a,o);return o},o=e=>e?a(e):a,c=e=>e,l=e=>{let t=o(e),r=e=>(function(e,t=c){let r=s.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return s.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},i=(e=>e?l(e):l)(e=>({products:[],fetchProducts:async()=>{console.log("Fetching products...");try{let t=await fetch("https://67dc2b4d1fd9e43fe477817a.mockapi.io/products");if(!t.ok)throw Error("Ошибка HTTP: ".concat(t.status));let r=await t.json();console.log("Полученные данные:",r),Array.isArray(r)?e({products:r.map(e=>({...e,liked:!1}))}):(console.error("API вернул некорректные данные:",r),e({products:[]}))}catch(e){e instanceof Error?console.error("Ошибка при добавлении продукта:",e.message):console.error("Неизвестная ошибка:",e)}},addProduct:async t=>{console.log("Добавление продукта:",t);try{let r=await fetch("https://67dc2b4d1fd9e43fe477817a.mockapi.io/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Ошибка HTTP при добавлении продукта: ".concat(r.status));let s=await r.json();e(e=>({products:[...e.products,s]}))}catch(e){e instanceof Error?console.error("Ошибка при добавлении продукта:",e.message):console.error("Неизвестная ошибка:",e)}},toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,liked:!e.liked}:e)})),removeProduct:t=>e(e=>({products:e.products.filter(e=>e.id!==t)}))}))},8404:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]",function(){return r(8856)}])},8856:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(7876),a=r(9099),o=r(5508),c=r(4232),l=r(4319);let i=()=>{let e=(0,a.useRouter)(),[t,r]=(0,c.useState)(null),[i,d]=(0,c.useState)(!0),{id:n}=e.query,{products:u}=(0,o.A)();return((0,c.useEffect)(()=>{if(!n||!u.length)return;let e=n;Array.isArray(n)&&(e=n[0]),"create-product"!==e&&(r(u.find(t=>t.id===Number(e))||null),d(!1))},[n,u]),"create-product"===n)?(0,s.jsx)(l.default,{}):i?(0,s.jsx)("div",{children:"Загрузка данных..."}):t?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"product-card bg-white rounded-lg shadow-md p-6 max-w-lg w-full",children:[(0,s.jsx)("img",{src:t.image,alt:t.title,className:"product-image mx-auto rounded-lg mb-4"}),(0,s.jsxs)("div",{className:"product-details text-center",children:[(0,s.jsx)("h1",{className:"product-title text-2xl font-bold mb-2 product-details",children:t.title}),(0,s.jsx)("p",{className:"product-description text-gray-600 mb-4",children:t.detailedDescription||t.description}),(0,s.jsxs)("p",{className:"product-price text-lg font-semibold text-blue-500",children:["Цена: $",t.price]}),(0,s.jsx)("button",{onClick:()=>e.push("/products"),className:"back-button mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-400 transition",children:"Назад к товарам"})]})]})}):(0,s.jsx)("div",{children:"Продукт не найден."})}},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[230,636,593,792],()=>t(8404)),_N_E=e.O()}]);