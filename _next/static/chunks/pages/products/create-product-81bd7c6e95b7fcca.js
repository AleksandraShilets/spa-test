(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[905],{4319:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var o=r(7876),a=r(4232),s=r(5508),c=r(8230),n=r.n(c);let u=()=>{let{addProduct:e}=(0,s.A)(),[t,r]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[d,p]=(0,a.useState)("");return(0,o.jsxs)("form",{onSubmit:o=>{o.preventDefault(),e({id:Date.now(),title:t,description:c,price:Number(l),image:d}),r(""),u(""),i(""),p("")},children:[(0,o.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Name",required:!0}),(0,o.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Description",required:!0,className:"w-96 h-32 resize-none border rounded-md p-2"}),(0,o.jsx)("input",{type:"number",value:l,onChange:e=>i(e.target.value),placeholder:"Price",required:!0}),(0,o.jsx)("input",{type:"text",value:d,onChange:e=>p(e.target.value),placeholder:"URL image",required:!0}),(0,o.jsx)("button",{type:"submit",children:"Add product"}),(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)(n(),{href:"/products",className:"mt-auto py-4 text-right link-reset",children:"Back products"})})]})}},5376:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/create-product",function(){return r(4319)}])},5508:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(4232);let a=e=>{let t;let r=new Set,o=(e,o)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=o?o:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,s={setState:o,getState:a,getInitialState:()=>c,subscribe:e=>(r.add(e),()=>r.delete(e))},c=t=e(o,a,s);return s},s=e=>e?a(e):a,c=e=>e,n=e=>{let t=s(e),r=e=>(function(e,t=c){let r=o.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return o.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},u=(e=>e?n(e):n)(e=>({products:[],fetchProducts:async()=>{console.log("Fetching products...");try{let t=await fetch("https://67dc2b4d1fd9e43fe477817a.mockapi.io/products");if(!t.ok)throw Error("Ошибка HTTP: ".concat(t.status));let r=await t.json();console.log("Полученные данные:",r),Array.isArray(r)?e({products:r.map(e=>({...e,liked:!1}))}):(console.error("API вернул некорректные данные:",r),e({products:[]}))}catch(e){e instanceof Error?console.error("Ошибка при добавлении продукта:",e.message):console.error("Неизвестная ошибка:",e)}},addProduct:async t=>{console.log("Добавление продукта:",t);try{let r=await fetch("https://67dc2b4d1fd9e43fe477817a.mockapi.io/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Ошибка HTTP при добавлении продукта: ".concat(r.status));let o=await r.json();e(e=>({products:[...e.products,o]}))}catch(e){e instanceof Error?console.error("Ошибка при добавлении продукта:",e.message):console.error("Неизвестная ошибка:",e)}},toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,liked:!e.liked}:e)})),removeProduct:t=>e(e=>({products:e.products.filter(e=>e.id!==t)}))}))}},e=>{var t=t=>e(e.s=t);e.O(0,[230,636,593,792],()=>t(5376)),_N_E=e.O()}]);