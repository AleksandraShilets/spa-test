(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{2978:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(7876),n=r(9099),s=r(4232),c=r(5508),i=r(8102);let a=()=>{let e=(0,n.useRouter)(),{products:t,fetchProducts:r,toggleLike:a,removeProduct:l}=(0,c.A)(),[u,d]=(0,s.useState)("all"),p=t=>{e.push("/products/".concat(t))};(0,s.useEffect)(()=>{r()},[r]);let b="all"===u?t:t.filter(e=>e.liked);return 0===t.length?(0,o.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,o.jsx)("p",{className:"text-lg text-gray-600",children:"Loading products..."})}):(0,o.jsxs)("div",{className:"bg-gray-100 min-h-screen p-6",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Services"}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,o.jsx)("button",{onClick:()=>e.push("/products/create-product"),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition",children:"Create product"}),(0,o.jsx)("button",{onClick:()=>e.push("/"),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition",children:"Go to main"})]}),(0,o.jsxs)("div",{className:"flex justify-center w-[200px] mx-auto mb-8 p-4 gap-4 flex-container",children:[(0,o.jsx)("button",{onClick:()=>d("all"),className:"px-4 py-2 rounded-lg ".concat("all"===u?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"," hover:bg-blue-400 transition"),children:"All"}),(0,o.jsx)("button",{onClick:()=>d("liked"),className:"px-4 py-2 rounded-lg ".concat("liked"===u?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"," hover:bg-blue-400 transition"),children:"Favourites"})]}),(0,o.jsx)("div",{className:"grid-container",children:b.map(e=>(0,o.jsxs)("div",{className:"card relative bg-white rounded-lg shadow-md overflow-hidden w-full max-w-[400px]",onClick:()=>p(e.id),children:[(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"absolute cross top-2 right-2 bg-gray-200 text-black rounded-full w-8 h-8 flex items-center justify-center hover:bg-gray-300 hover:text-black transition",children:(0,o.jsx)(i.zhF,{size:24})}),(0,o.jsx)("img",{src:e.image||"https://via.placeholder.com/150",alt:e.title,style:{width:"400px",height:"auto",borderRadius:"8px",objectFit:"cover",aspectRatio:"3/4"}}),(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e.id)},className:"sticky ".concat(e.liked?"bg-red-100 text-red-500":"bg-gray-100 text-gray-500"," hover:scale-[1.2] transition rounded-full p-[6px]"),children:e.liked?(0,o.jsx)(i.Sxb,{size:24}):(0,o.jsx)(i.DTR,{size:24})}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2 truncate",children:e.title}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-4 truncate",children:e.description}),(0,o.jsxs)("p",{className:"text-sm font-bold text-blue-600",children:["Price: $",e.price]})]})]},e.id))})]})}},3004:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(2978)}])},3620:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var o=r(4232),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=o.createContext&&o.createContext(n),c=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var o,n,s;o=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in o?Object.defineProperty(o,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>o.createElement(d,i({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,r)=>o.createElement(t.tag,l({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:n,size:s,title:a}=e,u=function(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;r[o]=e[o]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,c),d=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),o.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,u,{className:r,style:l(l({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&o.createElement("title",null,a),e.children)};return void 0!==s?o.createElement(s.Consumer,null,e=>t(e)):t(n)}},5508:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(4232);let n=e=>{let t;let r=new Set,o=(e,o)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=o?o:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,s={setState:o,getState:n,getInitialState:()=>c,subscribe:e=>(r.add(e),()=>r.delete(e))},c=t=e(o,n,s);return s},s=e=>e?n(e):n,c=e=>e,i=e=>{let t=s(e),r=e=>(function(e,t=c){let r=o.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return o.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},a=(e=>e?i(e):i)(e=>({products:[],fetchProducts:async()=>{console.log("Fetching products...");try{let t=await fetch("https://67dc2b4d1fd9e43fe477817a.mockapi.io/products");if(!t.ok)throw Error("Ошибка HTTP: ".concat(t.status));let r=await t.json();console.log("Полученные данные:",r),Array.isArray(r)?e({products:r.map(e=>({...e,liked:!1}))}):(console.error("API вернул некорректные данные:",r),e({products:[]}))}catch(e){e instanceof Error?console.error("Ошибка при добавлении продукта:",e.message):console.error("Неизвестная ошибка:",e)}},addProduct:async t=>{console.log("Добавление продукта:",t);try{let r=await fetch("https://67dc2b4d1fd9e43fe477817a.mockapi.io/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("Ошибка HTTP при добавлении продукта: ".concat(r.status));let o=await r.json();e(e=>({products:[...e.products,o]}))}catch(e){e instanceof Error?console.error("Ошибка при добавлении продукта:",e.message):console.error("Неизвестная ошибка:",e)}},toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,liked:!e.liked}:e)})),removeProduct:t=>e(e=>({products:e.products.filter(e=>e.id!==t)}))}))},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[897,636,593,792],()=>t(3004)),_N_E=e.O()}]);